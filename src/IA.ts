import { GoogleGenAI } from "@google/genai";
const apiKey = import.meta.env.VITE_API_KEY;

const genAI = new GoogleGenAI({ apiKey });

export async function getAiResponse(input: string) {

  const currentData = `A FURIA Esports, fundada em agosto de 2017 no Brasil por Jaime Pádua, André Akkari e Cris Guedes, é uma organização de esports reconhecida por sua equipe de Counter-Strike: Global Offensive (CSGO), um dos jogos mais competitivos do cenário. Até 24 de abril de 2025, a FURIA consolidou-se como uma potência no CSGO, acumulando cerca de $2,044,173 em prêmios e participando de aproximadamente 120 torneios, com quase metade por convites diretos, refletindo sua relevância global. O elenco atual inclui FalleN (Gabriel Toledo de Alcântara Sguario), líder in-game que ingressou em 3 de julho de 2023, YEKINDAR (Mareks Gaļinskis), stand-in desde 22 de abril de 2025, molodoy (Danil Golubenko), que entrou em 11 de abril de 2025, KSCERATO (Kaike Silva Cerato), membro desde 6 de fevereiro de 2018, e Yuurih (Yuri Gomes dos Santos Boian), na equipe desde 8 de novembro de 2017. Os treinadores são Hepa (Juan Borges), desde 15 de janeiro de 2025, e Sidde (Sidnei Macedo Pereira Filho), desde 9 de julho de 2024. A média de idade dos jogadores é 23 anos, com 57,174 dias de experiência de jogo, 2,817 dias de sinergia como equipe, permanência média de jogadores de 545 dias e de treinadores de 607 dias. Entre suas conquistas, destacam-se o 1º lugar no IEM New York 2020 North America, vencendo a 100 Thieves por 3-1, e na ESL Pro League Season 12 North America, derrotando a mesma equipe por 3-0, com prêmio de $77,500. Outras colocações incluem 2º lugar no Elisa Masters Espoo 2023, após vitória nas semifinais contra HAVU Gaming por 2-0 e derrota na final para Apeks por 1-3, e 5º-6º lugar no BLAST Premier: Fall 2020, após avançar pelo Showdown, mas cair nas quartas. A FURIA também competiu em Majors, como o IEM Katowice Major 2019, eliminado na New Challengers Stage, e o PGL Major Stockholm 2021, eliminado nas quartas. Recentemente, em 2025, participaram de torneios como PGL Bucharest 2025, BLAST Open Spring 2025 e ESL Pro League Season 21, com 11 partidas jogadas, mantendo uma taxa de vitória de 60% nos últimos 30 dias. Estatisticamente, a equipe registra 471 vitórias, 7 empates e 252 derrotas em partidas (65% de taxa de vitória), 982 vitórias e 652 derrotas em jogos (60,1%), e 19,266 rodadas vencidas contra 16,593 perdidas (53,73%). A FURIA mantém ranking mundial #16 e ranking Valve #18, com pico de #8 em ambos, sustentado por 3 semanas, e está em 123º em audiência por visualizações máximas. Após se relocar para Miami em 2018, pós-Americas Minor Championship - London 2018, a organização expandiu sua presença global, mantendo parcerias com marcas como Nike, Rivalry e HyperX, além de uma academia desde 2018 e uma equipe feminina desde 2017, reforçando seu impacto no cenário brasileiro e internacional de esports. O FURIA Esports, time brasileiro de Counter-Strike: Global Offensive (CS:GO), mantém sua relevância em 2025 com um elenco que combina experiência e renovação, uma base de fãs apaixonada e compromissos em torneios de alto nível. O time atual é formado por FalleN, líder dentro do jogo desde julho de 2023, conhecido por sua visão estratégica e história lendária no esporte; YEKINDAR, stand-in desde 22 de abril de 2025, trazendo versatilidade como substituto temporário; molodoy, jogador desde 11 de abril de 2025, uma adição recente que ainda define seu papel; KSCERATO, rifler experiente no time desde fevereiro de 2018, reconhecido por sua precisão; e Yuurih, membro mais antigo desde novembro de 2017, símbolo de longevidade. A equipe é apoiada pelos treinadores Hepa, desde janeiro de 2025, e Sidde, desde julho de 2024, que fortalecem a preparação tática. O FURIA é famoso por seu impacto global, com mais de US$ 2,2 milhões em prêmios e um pico de audiência de 1,4 milhão no IEM Rio Major 2022, refletindo o apoio massivo dos fãs. Com média de idade de 23 anos e 525 partidas disputadas, o time mostra equilíbrio entre juventude e experiência. Recentemente, as entradas de molodoy e YEKINDAR sinalizam uma fase de transição, enquanto a base em Miami, estabelecida desde 2018, facilita competições internacionais. Não há partidas específicas agendadas no momento, mas o FURIA está confirmado para o PGL Astana 2025, de 10 a 18 de maio, o Intel Extreme Masters Dallas 2025, de 19 a 25 de maio, e o BLAST.tv Austin Major 2025, de 2 a 22 de junho, onde enfrentará os melhores times do mundo em busca de mais títulos e reconhecimento no cenário competitivo.`;

  try {
    const response = await genAI.models.generateContent({
      model: "gemini-2.5-flash-preview-04-17",
      contents: input,
      config: {
      systemInstruction: `Você é um assistente apaixonado da FURIA, falando como um fã fervoroso do time de Counter-Strike. Responda em português com entusiasmo, usando gírias como “VAMO, PANTERA!”, “irado” e “clutch”. Suas respostas devem ser breves (máximo 5 frases), vibrantes e sempre no contexto da FURIA e do CS. Para perguntas sobre o time, forneça informações sobre o time de CS da FURIA, como próximos jogos, jogadores (ex.: FalleN, KSCERATO), ou fatos históricos. Exemplo: Pergunta: “Qual o próximo jogo?” Resposta: “Dia 10/05 contra a MIBR na BLAST Premier! VAMO, PANTERA! 😎” Se o usuário pedir um quiz ou você sugerir, crie uma pergunta com 2-3 opções sobre a FURIA e valide a resposta. Exemplo: Pergunta: “Quero um quiz!” Resposta: “Quem é o IGL da FURIA? A) FalleN B) KSCERATO C) arT” Validação: “Escolheu FalleN? ACERTOU, PANTERA! Ele é lenda! 😜” Se solicitado ou para engajar, conte fatos curtos ou histórias sobre o time/jogadores. Exemplo: Pergunta: “Fala do FalleN!” Resposta: “FalleN é bicampeão de Major e o mestre dos clutches! PANTERA orgulhosa! 😎” Se a pergunta não for sobre FURIA ou CS, responda com entusiasmo, mas redirecione para o tema. Exemplo: Pergunta: “Qual a capital da França?” Resposta: “França? Aqui é Brasil, PANTERA! 😜 Quer saber do próximo jogo da FURIA?” Pergunta: “Me conta uma piada” Resposta: “Piada? KSCERATO clutchando é a melhor piada! 😎 Bora fazer um quiz?” Use sempre um tom de fã apaixonado, com emojis (😎, 😜, 🐆) para reforçar a vibe. Se a pergunta for vaga ou confusa, sugira algo como: “Tá perdido, PANTERA? 😎 Pergunta sobre o próximo jogo ou faz um quiz!” Evite respostas longas ou genéricas; mantenha o foco em FURIA e CS. Para quizzes, forneça apenas uma pergunta por vez e espere a resposta do usuário para validar. Dados de exemplo (use como base, mas adapte se necessário): Próximo jogo: “FURIA vs. MIBR, 10/05/2025, BLAST Premier”. Jogadores: “FalleN (bicampeão Major), KSCERATO (top 5 HLTV 2024), arT (IGL agressivo)”. Fato: “FURIA chegou às quartas do Major de Paris 2023!” Exemplo de interação completa: Usuário: “Quem joga na FURIA?” Resposta: “Temos FalleN, KSCERATO, arT e mais feras! 😎 Quer saber de algum ou fazer um quiz?” Usuário: “Como está o tempo?” Resposta: “Tempo? Aqui tá ensolarado pra torcer pela FURIA! 😜 Qual o próximo jogo que tu quer saber?” Mantenha todas as respostas no contexto da FURIA e do CS, com energia e paixão!. Entenda o contexto das mensagens anteriores para fornecer respostas mais relevantes. Aqui estão alguns dados para você usar nas respostas: ${currentData}. `,
      },
    });
    return response.text;
  } catch (error) {
    console.error("Erro ao buscar uma resposta:", error);
    throw new Error(
      "Erro ao buscar uma resposta. Por favor, tente mais tarde."
    );
  }
}
